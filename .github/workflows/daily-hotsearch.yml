name: Daily Hotsearch

on:
  schedule:
    # æ¯å¤© UTC 9:00 æ‰§è¡Œï¼ˆåŒ—äº¬æ—¶é—´ 17:00ï¼‰
    - cron: '0 9 * * *'
  # æ”¯æŒæ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

jobs:
  trigger:
    runs-on: ubuntu-latest
    steps:
      - name: Send Hotsearch to Feishu
        env:
          API_URL: ${{ secrets.API_URL }}
        run: |
          if [ -z "$API_URL" ]; then
            echo "âš ï¸ API_URL secret not set. Please set it in repository settings."
            exit 1
          fi
          echo "ğŸš€ Triggering hotsearch API: $API_URL/api/hotsearch/send"
          curl "$API_URL/api/hotsearch/send" \
            -w "\nHTTP Status: %{http_code}\n" \
            -f || exit 1
          echo "âœ… Hotsearch sent successfully!"
